{% load static %}
{% load women_tags %}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <!--при UTF-8 нет кирилицы-->
    <title>{{ title }}</title>
    <link type="text/css" href="{% static 'women/css/styles.css' %}" rel="stylesheet" />
    <link rel="shortcut icon" href="{% static 'women/images/main.ico' %}" type="image/x-icon"/>
</head>

<body>
{% block mainmenu %}
    <div class="header">
        <ul id="mainmenu" class="mainmenu">
        <li class="logo"><a href="{% url 'home' %}"><div class="logo"></div></a></li>
        
        {% for m in menu %}
                <li><a href="{% url m.url_name %}">{{m.title}}</a></li>
        {% endfor %}
        
        {% if request.user.is_authenticated %}
            <li class="last">{{user.username}} | <a href="{% url 'logout' %}">Выйти</a> </li>
        {% else %}
            <li class="last"><a href="{% url 'register' %}">Регистрация</a> | <a href="{% url 'login' %}">Войти</a></li>
        {% endif %}
        </ul>
        <div class="clear"></div>
    </div>
{% endblock mainmenu %}

<table class="table-content" border=0 cellpadding="0" cellspacing="0">
<tr>
<!-- sidebar слева -->
<!--    {% load cache %} <!-- кэширование части шаблона(сайдбара) -->

    <td valing="top" class="left-chapters">
        <!--{% getcats filter=1 %} связь с women_tags при удалении меньше на 1 запрос -->

        <ul id="leftchapters">
<!--        {% cache 60 * 3 sidebar %}-->
        {% if cat_selected == 0 %}
            <li class="selected">Все категории</li>
        {% else %}
            <li><a href="{% url 'home' %}">Все категории</a></li>
        {% endif %}
             
<!--             {% show_categories '-name' cat_selected %} связь с list_categories через women_tags-->
        {% for c in cats %}
        
        {% if c.women__count > 0 %} <!-- если есть хоть 1 запить, тогда категорию видно-->
        
            {% if c.pk == cat_selected %}
                <li class="selected">{{c.name}}</li>
            {% else %}
                <li><a href="{{ c.get_absolute_url }}">{{c.name}}</a></li>
            {% endif %}
        {% endif %}
        {% endfor %}
<!--        {% endcache %}-->

            <li class="share">
                <p>Наш канал</p>
                <a class="share-yt" href="https://www.youtube.com/channel/UC0H7qDE4V_hcPdN_T28-q4A">
            </li>
        </ul>
    </td>
<!-- конец sidebar'a -->
<td valign="top" class="content">

    <!-- хлебные крошки -->
    {% block breadcrumbs %}
    {% endblock %}

<!-- блок контента -->
    <div class="content-text">
{% block content %}
{% endblock %}

{% if page_obj.has_other_pages %}
    <nav class="list-pages">

        <ul>
        {% if page_obj.has_previous %} <!--кнопка на предыдущую стр-->
            <li class="page-num">
                <a href="?page={{page_obj.previous_page_number}}">&lt;</a>
            </li>
        {% endif %}

            {% for p in paginator.page_range %}
                {% if page_obj.number == p %}
                    <li class="page-num page-num-selected">{{p}}</li>
                {% elif p >= page_obj.number|add:-2 and p <= page_obj.number|add:2 %}
                
                    <li class="page-num">
                        <a href="?page={{p}}">{{p}}</a>
                    </li>
                {% endif %}
            {% endfor %}

        {% if page_obj.has_next %} <!--кнопка на следующую стр-->
            <li class="page-num">
                <a href="?page={{page_obj.next_page_number}}">&gt;</a>
            </li>
        {% endif %}
        </ul>

    </nav>
{% endif %}

    </div>
<!-- конец блока контента-->

</td></tr></table>
</td></tr>
<!--footer-->
<tr><td valign=top>
    <div id="footer">
        <p>© Козлова-Севич А.В., 2022</p>
    </div>
</td></tr></table>
<!--конец footer'a-->
</body>
</html>